<div class="wizard-root">
  <h1>üßë‚Äçüíº Cr√©ation d‚Äôun employeur & publication d‚Äôune offre</h1>

  <!-- Barre de progression -->
  <mat-progress-bar mode="determinate" [value]="(stepper.selectedIndex + 1) * 50"></mat-progress-bar>

  <div class="stepper-container">
    <mat-horizontal-stepper linear #stepper>

      <!-- √âtape 1 : Informations employeur -->
      <mat-step [stepControl]="employeurForm">
        <form [formGroup]="employeurForm">
          <ng-template matStepLabel>Informations de l'employeur</ng-template>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Nom de l'entreprise</mat-label>
            <input matInput formControlName="nom" />
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Type d'entreprise</mat-label>
            <mat-select formControlName="typeEntreprise">
              <mat-option value="PME">PME</mat-option>
              <mat-option value="STARTUP">Startup</mat-option>
              <mat-option value="MULTINATIONALE">Multinationale</mat-option>
              <mat-option value="AUTRE">Autre</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Email de contact</mat-label>
            <input matInput type="email" formControlName="emailContact" />
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>T√©l√©phone</mat-label>
            <input matInput formControlName="telephone" />
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Poste occup√©</mat-label>
            <input matInput formControlName="poste" />
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Adresse</mat-label>
            <input matInput formControlName="adresse" />
          </mat-form-field>

          <div class="row">
            <mat-form-field appearance="outline" class="half-width">
              <mat-label>Ville</mat-label>
              <input matInput formControlName="ville" />
            </mat-form-field>

            <mat-form-field appearance="outline" class="half-width">
              <mat-label>Pays</mat-label>
              <input matInput formControlName="pays" />
            </mat-form-field>
          </div>

          <div class="step-footer">
            <button mat-raised-button color="primary" matStepperNext [disabled]="!employeurForm.valid">
              Suivant
            </button>
          </div>
        </form>
      </mat-step>

      <!-- √âtape 2 : Cr√©ation de l‚Äôoffre -->
      <mat-step [stepControl]="offreForm">
        <form [formGroup]="offreForm">
          <ng-template matStepLabel>Informations de l‚Äôoffre</ng-template>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Titre de l'offre</mat-label>
            <input matInput formControlName="titre" />
          </mat-form-field>

          <!-- ‚úÖ √âditeur Quill -->
          <div class="quill-container">
            <label class="quill-label">Description</label>
            <quill-editor
              formControlName="description"
              [modules]="quillModules"
              theme="snow"
              class="quill-editor">
            </quill-editor>
          </div>

          <div class="row">
            <mat-form-field appearance="outline" class="half-width">
              <mat-label>Cat√©gorie</mat-label>
              <mat-select formControlName="categorie">
                <mat-option value="DEVELOPPEMENT_INGENIERIE">D√©veloppement/ing√©nierie</mat-option>
                <mat-option value="ARCHITECTURE">Architecture</mat-option>
                <mat-option value="ANALYSTE">Analyse d‚Äôaffaires (fonctionnelle et technique)</mat-option>
                <mat-option value="ASSURANCE_QUALITE">Test/assurance qualit√©</mat-option>
                <mat-option value="GESTION_PROJET">Gestion de projets</mat-option>
                <mat-option value="ADMIN_BD">Administration de base de donn√©es</mat-option>
                <mat-option value="INFRASTRUCTURE">Infrastructure/nuage (cloud)</mat-option>
                <mat-option value="IA">Technologies num√©riques √©mergentes(IA)</mat-option>
                <mat-option value="CYBERSECURITE">Cybers√©curit√©</mat-option>
                <mat-option value="AUTRE">Autre</mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline" class="half-width">
              <mat-label>Ville</mat-label>
              <input matInput formControlName="ville" />
            </mat-form-field>
          </div>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Pays</mat-label>
            <input matInput formControlName="pays" />
          </mat-form-field>

          <!-- ‚úÖ Date de fin d‚Äôaffichage avec Datepicker -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Date de fin d'affichage</mat-label>
            <input
              matInput
              [matDatepicker]="picker"
              formControlName="dateFinAffichage"
              placeholder="Choisissez une date" />
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>

            <mat-error *ngIf="offreForm.get('dateFinAffichage')?.hasError('required')">
              La date de fin d'affichage est obligatoire
            </mat-error>
            <mat-error *ngIf="offreForm.get('dateFinAffichage')?.hasError('minDate')">
              La date doit √™tre ult√©rieure √† aujourd‚Äôhui
            </mat-error>
          </mat-form-field>

          <div class="step-footer">
            <button mat-raised-button matStepperPrevious>Pr√©c√©dent</button>
            <button
              mat-raised-button
              color="accent"
              (click)="soumettre()"
              [disabled]="!offreForm.valid">
              ‚úÖ Cr√©er l‚Äôemployeur & publier l‚Äôoffre
            </button>
          </div>
        </form>
      </mat-step>

    </mat-horizontal-stepper>
  </div>
</div>
