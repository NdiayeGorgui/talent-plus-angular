<div class="create-offre-container">
  <mat-card>
    <mat-card-title>Créer une nouvelle offre</mat-card-title>
    <mat-card-content>
      <form [formGroup]="offreForm" (ngSubmit)="onSubmit()">

        <!-- Titre -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Titre de l'offre</mat-label>
          <input matInput formControlName="titre" placeholder="Ex: Développeur Angular">
          <mat-error *ngIf="offreForm.get('titre')?.hasError('required')">
            Le titre est obligatoire
          </mat-error>
          <mat-error *ngIf="offreForm.get('titre')?.hasError('minlength')">
            Minimum 3 caractères
          </mat-error>
        </mat-form-field>

        <!-- Description -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Description</mat-label>
          <textarea matInput rows="5" formControlName="description"
                    placeholder="Décrivez le poste, les missions, etc."></textarea>
          <mat-error *ngIf="offreForm.get('description')?.hasError('required')">
            La description est obligatoire
          </mat-error>
          <mat-error *ngIf="offreForm.get('description')?.hasError('minlength')">
            Minimum 10 caractères
          </mat-error>
        </mat-form-field>

         <!-- Categorie -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Categorie</mat-label>
          <input matInput formControlName="categorie" placeholder="Ex: Développement/ingénierie">
          <mat-error *ngIf="offreForm.get('categorie')?.hasError('required')">
            La categorie est obligatoire
          </mat-error>
          <mat-error *ngIf="offreForm.get('categorie')?.hasError('minlength')">
            Minimum 2 caractères
          </mat-error>
        </mat-form-field>

         <!-- Ville -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Ville</mat-label>
          <input matInput formControlName="ville" placeholder="Ex: Montréal">
          <mat-error *ngIf="offreForm.get('ville')?.hasError('required')">
            La ville est obligatoire
          </mat-error>
          <mat-error *ngIf="offreForm.get('ville')?.hasError('minlength')">
            Minimum 2 caractères
          </mat-error>
        </mat-form-field>

         <!-- Pays -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Pays</mat-label>
          <input matInput formControlName="pays" placeholder="Ex: Canada">
          <mat-error *ngIf="offreForm.get('pays')?.hasError('required')">
            La ville est obligatoire
          </mat-error>
          <mat-error *ngIf="offreForm.get('pays')?.hasError('minlength')">
            Minimum 2 caractères
          </mat-error>
        </mat-form-field>

        <!-- Actif -->
        <mat-slide-toggle formControlName="active">Offre active</mat-slide-toggle>

        <!-- Recruteur (liste déroulante) -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Recruteur</mat-label>
          <mat-select formControlName="recruteurId" placeholder="Sélectionnez un recruteur">
            <mat-option *ngFor="let recruteur of recruteurs" [value]="recruteur.id">
              {{ recruteur.prenom }} {{ recruteur.nom }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="offreForm.get('recruteurId')?.hasError('required')">
            Le recruteur est obligatoire
          </mat-error>
        </mat-form-field>

        <!-- Boutons -->
        <div class="actions">
          <button mat-stroked-button color="warn" routerLink="/offres">Annuler</button>
          <button mat-flat-button color="primary" type="submit" [disabled]="isSubmitting || offreForm.invalid">
            {{ isSubmitting ? 'Création...' : 'Créer l\'offre' }}
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>
