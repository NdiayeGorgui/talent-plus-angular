<div class="wizard-root">
    <h1>Postuler</h1>

    <!-- üîπ Barre de progression -->
    <mat-progress-bar mode="determinate" [value]="(stepper.selectedIndex + 1) * 20">
    </mat-progress-bar>

    <!-- ‚úÖ Encadr√© avec marge -->
    <div class="stepper-container">
        <mat-horizontal-stepper linear #stepper>

            <!-- √âtape 1 -->
            <mat-step [stepControl]="candidatForm">
                <form [formGroup]="candidatForm" style="margin-top: 32px;">

                    <ng-template matStepLabel>Informations personnelles</ng-template>

                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Nom</mat-label>
                        <input matInput formControlName="nom">
                    </mat-form-field>

                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Pr√©nom</mat-label>
                        <input matInput formControlName="prenom">
                    </mat-form-field>

                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Email</mat-label>
                        <input matInput type="email" formControlName="email">
                    </mat-form-field>

                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>T√©l√©phone</mat-label>
                        <input matInput formControlName="telephone">
                    </mat-form-field>

                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Date de naissance</mat-label>
                        <input matInput type="date" formControlName="dateNaissance">
                    </mat-form-field>

                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Adresse</mat-label>
                        <input matInput formControlName="adresse">
                    </mat-form-field>

                    <div>
                        <button mat-raised-button matStepperNext [disabled]="!candidatForm.valid">
                            Suivant
                        </button>
                    </div>
                </form>
            </mat-step>

            <!-- √âtape 2 -->
            <mat-step>
                <ng-template matStepLabel>Comp√©tences</ng-template>
                <div style="margin-top: 32px;">
                    <app-competences-step (valid)="onCompetencesSaved($event)" (next)="stepper.next()"
                        (previous)="stepper.previous()">
                    </app-competences-step>
                </div>
                <div class="step-footer">
                    <button mat-raised-button matStepperPrevious>Pr√©c√©dent</button>
                    <button mat-raised-button (click)="stepper.next()">Suivant</button>
                </div>
            </mat-step>

            <!-- √âtape 3 -->
            <mat-step>
                <ng-template matStepLabel>Exp√©riences</ng-template>
                <div style="margin-top: 32px;">
                    <app-experiences-step (valid)="onExperiencesSaved($event)" (next)="stepper.next()"
                        (previous)="stepper.previous()">
                    </app-experiences-step>
                </div>

                <div class="step-footer">
                    <button mat-raised-button matStepperPrevious>Pr√©c√©dent</button>
                    <button mat-raised-button (click)="stepper.next()">Suivant</button>
                </div>
            </mat-step>

            <!-- √âtape 4 -->
            <mat-step>
                <ng-template matStepLabel>CV & Lettre</ng-template>
                <div style="margin-top: 32px;">
                    <app-documents-step (valid)="onDocumentsSaved($event)" (next)="stepper.next()"
                        (previous)="stepper.previous()">
                    </app-documents-step>
                </div>

                <div class="step-footer">
                    <button mat-raised-button matStepperPrevious>Pr√©c√©dent</button>
                    <button mat-raised-button (click)="stepper.next()">Suivant</button>
                </div>
            </mat-step>

            <!-- √âtape 5 -->
            <mat-step>
                <ng-template matStepLabel>M√©tadonn√©es RH</ng-template>

                <app-metadonnee-rh-step (valid)="onMetadonneeSaved($event)" (next)="stepper.next()"
                    (previous)="stepper.previous()">
                </app-metadonnee-rh-step>
            </mat-step>

            <!-- √âtape 6 -->
            <mat-step>
                <ng-template matStepLabel>R√©capitulatif</ng-template>

                <div style="margin-top: 32px;">
                    <app-recapitulatif [candidat]="candidatForm.value" [competences]="competences"
                        [experiences]="experiences" [cv]="cv" [lettre]="lettre" [metadonneeRH]="metadonneeRH">
                        <!-- üõ† AJOUT ICI -->
                    </app-recapitulatif>

                </div>


                <div class="step-footer">
                    <button mat-raised-button matStepperPrevious>Pr√©c√©dent</button>
                    <button mat-raised-button color="warn" (click)="annuler()">Annuler</button>
                    <button mat-raised-button color="accent" (click)="soumettreCandidature()">Postuler</button>
                    
                </div>
            </mat-step>

        </mat-horizontal-stepper>
    </div>
</div>